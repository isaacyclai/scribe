---
const pathname = Astro.url.pathname;

const navLinks = [
  { href: '/sessions', label: 'Sittings' },
  { href: '/motions', label: 'Motions' },
  { href: '/bills', label: 'Bills' },
  { href: '/questions', label: 'Questions' },
  { href: '/members', label: 'MPs' },
  { href: '/ministries', label: 'Ministries' },
  { href: '/about', label: 'About' },
];
---

<nav class="sticky top-0 z-50 border-b border-zinc-200 bg-white/80 backdrop-blur-sm">
  <div class="mx-auto flex h-16 max-w-6xl items-center justify-between px-4">
    <a href="/" class="text-xl font-bold text-zinc-900">
      Scribe
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden items-center gap-6 md:flex">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            'text-sm font-medium transition-colors',
            pathname === link.href || pathname.startsWith(link.href + '/')
              ? 'text-blue-600'
              : 'text-zinc-600 hover:text-zinc-900'
          ]}
        >
          {link.label}
        </a>
      ))}
    </div>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-button"
      class="rounded-md p-2 text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900 md:hidden"
      aria-label="Toggle menu"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        id="menu-icon"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6 hidden"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        id="close-icon"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <!-- Mobile Navigation Dropdown -->
  <div id="mobile-menu" class="hidden border-t border-zinc-100 bg-white px-4 py-4 md:hidden">
    <div class="flex flex-col gap-4">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            'text-base font-medium transition-colors',
            pathname === link.href || pathname.startsWith(link.href + '/')
              ? 'text-blue-600'
              : 'text-zinc-600 hover:text-zinc-900'
          ]}
        >
          {link.label}
        </a>
      ))}
    </div>
  </div>
</nav>

<script>
  const menuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');

  menuButton?.addEventListener('click', () => {
    const isOpen = !mobileMenu?.classList.contains('hidden');
    mobileMenu?.classList.toggle('hidden');
    menuIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
  });
</script>
